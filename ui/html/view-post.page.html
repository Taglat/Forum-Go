{{template "base" .}}

{{define "content"}}
<div class="home-container container">
    <h3>Title => {{.Title}}</h3>
    <h3>Path => "{{.Path}}"</h3>
    
    <div class="post">
        <h2>{{.Post.Title}}</h2>
        <p>
            Автор: {{.Post.Username}} | Created: {{.Post.Created.Format "02.01.2006 15:04"}}
            {{if ne .Post.Created .Post.Updated}}
                | Updated: {{.Post.Updated.Format "02.01.2006 15:04"}}
            {{end}}
        </p>
        
        <!-- Показываем категории поста -->
        {{if .Post.Categories}}
            <div class="post-categories">
                <b>Категории:</b>
                {{range $index, $category := .Post.Categories}}
                    {{if $index}}, {{end}}<a href="/category/{{$category.Slug}}">{{$category.Name}}</a>
                {{end}}
            </div>
        {{end}}
        
        <div>{{.Post.Content}}</div>
        
        {{if and .CurrentUser (eq .CurrentUser.ID .Post.UserID)}}
            <div class="btns">
                <a href="/post/{{.Post.ID}}/edit" class="btn">Edit</a>
                <form method="POST" action="/post/delete">
                    <input type="hidden" name="post_id" value="{{.Post.ID}}">
                    <button type="submit" onclick="return confirm('Delete post?')" class="btn delete-btn">Delete</button>
                </form>
            </div>
        {{end}}
    </div>
    
    <p><a href="/" class="link">To Home</a></p>
</div>
{{end}}
